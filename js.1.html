Home#Page

<!-- <div class="header">
  <div class="team-menu">ActionCable</div>

  <div class="channel-menu">
    <span class="channel-menu_name"><span class="channel-menu_prefix">#</span> Chat</span>
  </div>
</div>
<div class="main">
  <div class="listings">
    <div class="listings_channels">
      <h2 class="listings_header">Channels</h2>

    </div>
    <div class="listings_direct-messages">

      <ul class="channel_list">

      </ul>
    </div>
  </div>
  <div class="message-history" id="messages">
    <%#= render @messages %>
  </div>
</div>
<div class="footer">
  <div class="user-menu">
    <span class="user-menu_profile-pic"></span><span class="user-menu_username"><%#= current_user.email %></span>
    <span class="connection_status">online</span>
    <span class="logout"><%#= link_to('Logout', destroy_user_session_path, :method => :delete) %></span>
  </div>
  <div class="input-box">
    <input type="text" class="input-box_text" id="message_input"/>
  </div>
</div> -->

<div class="input-box">
  <input type="text" id="message_input" placeholder="Email"/>
  <input type="text" id="password_input" placeholder="Password"/>
  <input type="button" id="submit-button" value="Submit"/>
</div>
<html>
  <head>
 <!--  <meta name="csrf-param" content="authenticity_token">
  <meta name="action-cable-url" content="/cable"> -->
    <script type="text/javascript">
      var gld = ''
      function sign_in()
      {
        var j =  JSON.stringify({"command":"message","identifier": JSON.stringify({"channel":"ProfileChannel"}),"data": JSON.stringify({"message":"Hello World","token": "ed0296d5-6bf7-4724-b165-e35a080374b1","action": "sign_in","email": "husama@gmail.com",  "password" : "usamaaaa909rwetyiu0kjhutyr"})})
        gld.send(j);  
      }

       function WebSocketTest()
       {
          // var WebSocket = require('ws');
          if ("WebSocket" in window)
          {
             alert("WebSocket is supported by your Browser!");
             
             // Let us open a web socket
            // var ws = new WebSocket("ws://fusseo.herokuapp.com/cable");
              var ws = new WebSocket("ws://localhost:3000/cable");
              gld = ws
             ws.onopen = function(data)
             {
                // Web Socket is connected, send data using send()                  
                // var i = JSON.stringify({"command":"subscribe" , "identifier": JSON.stringify({"channel":"ProfileChannel","email":"faisal@gmail.com","password":"zaqxsw1234"})});
               
                // var j =  JSON.stringify({"command":"message","identifier": JSON.stringify({"channel":"ProfileChannel","email":"faisal@gmail.com","password":"zaqxsw1234"}),"data": {"message":"Hello World","action": "sign_up","email": "faisal@gmail.com",  "token" : "15efb0fe-1aec-43e7-a01c-b9720f370777", "id": {"id_message" : "blah blah", "ddd" : "dfdfdfdf"}, "video" : {"meta": "video_meta_data"}}})

               // SIGN UP
                var i = JSON.stringify({"command":"subscribe" , "identifier": JSON.stringify({"channel":"ProfileChannel"})});
               
                var j =  JSON.stringify({"command":"message","identifier": JSON.stringify({"channel":"ProfileChannel"}),"data": JSON.stringify({"token": "ed0296d5-6bf7-4724-b165-e35a080374b1","action": "sign_up","email": "faisalbhatti.pucit@gmail.com",  "password" : "allu9999999" })})

                  // sign up >> SIGN IN
                  // var j =  JSON.stringify({"command":"message","identifier": JSON.stringify({"channel":"ProfileChannel"}),"data": JSON.stringify({"message":"Hello World","token": "ed0296d5-6bf7-4724-b165-e35a080374b1","action": "sign_in","email": "test@gmail.com",  "password" : "zaqxsw1234"})})

                // SIGN IN
                // var i = JSON.stringify({"command":"subscribe" , "identifier": JSON.stringify({"channel":"ProfileChannel"})});
               
                // var j =  JSON.stringify({"command":"message","identifier": JSON.stringify({"channel":"ProfileChannel"}),"data": JSON.stringify({"message":"Hello World","token":"ed0296d5-6bf7-4724-b165-e35a080374b1","action": "sign_in","email": "faisal@gmail.com",  "password" : "zaqxsw1234"})})
 


                var response = ws.send(i);
                console.log("Response",response)
                setTimeout(function()
                {
                  var response1 = ws.send(j);
                  console.log("Response1",response1)
                }, 1000);
                
                // alert("Message is sent...");
             };
      
             ws.onmessage = function (evt) 
             { 
                var received_msg = evt.data;
                // alert("Message is received...");
                console.log("Rcvd",received_msg)
             };
      
             ws.onclose = function()
             { 
                // websocket is closed.
                alert("Connection is closed..."); 
             };
          }
          
          else
          {
             // The browser doesn't support WebSocket
             alert("WebSocket NOT supported by your Browser!");
          }
       }
    </script>
  </head>
  <body>
    <div id="sse">
      <a href="javascript:WebSocketTest()">Run WebSocket</a>
      <a href="javascript:sign_in()">Sign-in</a>
    </div>
  </body>
</html>
